<?xml version="1.0"?>
<ruleset name="PMD ruleset for Checkstyle"
         xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0
                             http://pmd.sourceforge.net/ruleset_2_0_0.xsd">

    <description>
        PMD 6.24.0 rulesets for Jpsonic.
        In v109.1.1, follow blocker/critical (priority2).

        A third-party implementation avoids some false positives in Java.
        The following suppressions are used :
            // NOPMD ******
            @SuppressWarnings("PMD.******")

		Only two rule is suppressed in the JSP and is described in this XML.
    </description>

    <include-pattern>.*/src/main/java/.*.java</include-pattern>
    <include-pattern>.*/src/main/webapp/WEB-INF/jsp/.*.jsp</include-pattern>
    <exclude-pattern>.*/.*Test*.java</exclude-pattern>
    <exclude-pattern>.*/.*TestCase*.java</exclude-pattern>
    <exclude-pattern>.*/.*DaoTestCaseBean2.java</exclude-pattern>
    <exclude-pattern>.*/.*TestData*.java</exclude-pattern>
    <exclude-pattern>.*/.*TestUtils*.java</exclude-pattern>

    <!-- for Java 6.24.0 -->
    <rule ref="category/java/bestpractices.xml"/>
    <rule ref="category/java/codestyle.xml"/>
    <rule ref="category/java/design.xml"/>
    <rule ref="category/java/documentation.xml"/>
    <rule ref="category/java/errorprone.xml"/>
    <rule ref="category/java/multithreading.xml"/>
    <rule ref="category/java/performance.xml"/>
    <rule ref="category/java/security.xml"/>

    <!-- for JSP 6.24.0 -->
    <rule ref="category/jsp/bestpractices.xml"/>
    <rule ref="category/jsp/bestpractices.xml/NoClassAttribute">
        <!-- 
        Violation : Do not use an attribute called ‘class’. Use "styleclass" for CSS styles.
        If apply this, the style will collapse.
         -->
        <properties>
            <property name="violationSuppressXPath"
                value="//Attribute[ upper-case(@Name)='CLASS' ]" />
        </properties>
    </rule>

    <rule ref="category/jsp/codestyle.xml"/>

    <rule ref="category/jsp/design.xml"/>
    <rule ref="category/jsp/design.xml/NoLongScripts">
        <!-- 
        Violation : Avoid having long scripts (e.g. Javascript) inside a JSP file.
        Most Scripts have JSTL variables.
        It can be managed by TagLib, but it is suppressed
        because it is expected to become more complicated and difficult to maintain.
         -->
        <properties>
            <property name="violationSuppressXPath"
                value="//HtmlScript[(@EndLine - @BeginLine > 10)]" />
        </properties>
    </rule>
    <rule ref="category/jsp/documentation.xml"/>
    <rule ref="category/jsp/errorprone.xml"/>
    <rule ref="category/jsp/multithreading.xml"/>
    <rule ref="category/jsp/performance.xml"/>
    <rule ref="category/jsp/security.xml"/>

</ruleset>
